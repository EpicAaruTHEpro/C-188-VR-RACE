<!DOCTYPE html>
<html>
  
  <head>

    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src = "https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"> </script>
    <script src="https://cdn.jsdelivr.net/gh/n5ro/aframe-physics-system@v4.0.1/dist/aframe-physics-system.min.js"></script>
    <script src="./components/rotation.js"></script>
    <script src="./components/game.js"></script>
  </head>

  <body>
    <a-scene background="color:#026F90">

      <!--Asset Management-->
      <a-assets timeout="10000">        
        <a-asset-item id = "terrainMap" src = "./assets/wilkesboro_racetrack/scene.gltf"></a-asset-item>
        <a-asset-item id = "car1" src = "./assets/nascar_race_car/scene.gltf"></a-asset-item>
      </a-assets>

      <a-entity id = "terrain" gltf-model = "#terrainMap" position = "0 20 0" scale = "4 4 4" terrain-rotation-reader></a-entity>
      <a-entity id = "car1" gltf-model = "#car1" position = "-30 1.5 5" rotation = "0 210 10" scale = "1 1 1" car-rotation-reader dynamic-body = "mass: 0" game-play></a-entity>

      <a-plane id = "flag" position = "10 1.5 5" width = "15" height = "15" color = "red" rotation = "0 0 0" static-body terrain-rotation-reader></a-plane>
      <a-entity id="look" look-controls camera position="-35 3 10"></a-entity>
      <!--Adding Text-->
      <a-entity id = "header" position = "-34 -3 -10" >
        <!--Header Text -->
          <a-entity  position="-28.5 21.5 0"  
          text="font: exo2bold; align: center; width: 40; color: black; value: VIRTUAL TRACK">
          </a-entity>
          
        <!--Timer-->
          <a-entity position="-23.5 19.3 0">
            <a-entity position="-1.5 0.07 0" 
            text="font: aileronsemibold; width: 12; color: black; value: TOTAL\nTIME" ></a-entity>
            <a-entity id="timer" position="-9.8 0.3 0" 
            text="font: exo2bold; align: center; width: 30; color: black; value: 00:00"></a-entity>
          </a-entity>
        </a-entity>
      <!--Commented the a-entity that is attached to camera which makes everything a child of the camera, so that the camera follows the car-->
      <!--/a-entity-->
  
  
        <!--Regarding final time text: we could have a js element but don't worry about that right now
            Also think about the start and endpoint implementation-->
        <!------------------------------------Game Over-------------------------------->
        <a-entity
          id="game_over_text"
          position="-35 8.5 -10"
          text="font: exo2bold; align: center; width: 40; color: white;value: CONGRATS YOU FINISHED THE TIME TRIAL!"
          visible="false"
        ></a-entity>
    </a-scene>
  </body>
</html>
